Шаг 1: Контракт (Interface)

Система должна знать, как выглядит любой обработчик, чтобы Диспетчеру было всё равно, что внутри.

    [ ] Создай интерфейс HandlerInterface (или CommandHandler).

    [ ] В нем всего один метод: handle(Command $command): Output.

    Суть: Мы договариваемся, что любой хендлер получает данные (Command) и обязательно возвращает результат (Output), который мы потом покажем пользователю.

Шаг 2: Сам Диспетчер (The Bus)

Это будет наш регулировщик. Он должен быть тупым: получил команду -> нашел нужного парня -> пнул его -> отдал результат.

    [ ] Создай класс CommandBus.

    [ ] Добавь в него свойство-массив (или Map) handlers = [].

    [ ] Добавь метод register(string $commandClassName, HandlerInterface $handler).

    [ ] Добавь метод dispatch(Command $command): Output.

Логика внутри dispatch:

    Берем класс команды (get_class($command)).

    Ищем в массиве handlers нужный хендлер.

    Если нет — кидаем ошибку.

    Если есть — вызываем $handler->handle($command) и возвращаем то, что он ответил.

Шаг 3: Первый реальный кейс (Проверка связи)

Чтобы убедиться, что система работает, создай одну «пустышку».

    [ ] Создай простую команду (DTO), например PingCommand.

    [ ] Создай PingHandler, который просто возвращает Output с текстом "Pong".

    [ ] Зарегистрируй это в Диспетчере и вызови.
